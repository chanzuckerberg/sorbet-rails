language: ruby
env:
- RAILS_VERSION=4.2
- RAILS_VERSION=5.0
- RAILS_VERSION=5.1
- RAILS_VERSION=5.2
- RAILS_VERSION=6.0
rvm:
- 2.3
- 2.4
- 2.5
- 2.6
- ruby-head
matrix:
  exclude:
  - rvm: 2.3
    env: RAILS_VERSION=6.0
  - rvm: 2.4
    env: RAILS_VERSION=6.0
  allow_failures:
  - rvm: ruby-head
before_install:
- gem install bundler -v 2.0.1 --no-doc
- gem install bundler -v 1.17.3 --no-doc
install: "./spec/bin/install.sh"
script:
- "./spec/bin/run_spec.sh"
deploy:
  provider: rubygems
  api_key:
    secure: k4Q/3LZSMb2UrVIs14WroQgPLopAMfPCCiKQJT7g5vTcyTWluKr7Oy3BMQihvTc3+nGHHkPSKX+319IlzGknxx5c7feG0ST2Yw0m0MyFLyie13t/Y4vA7Z25f7UeXXm5W6pqBSgZeeubxeAibrtlg1SuuK/lr9dXVnr34zATwTWGAUzuhOdVkjKznZdJOyHplKQw50HXdv+amMb7nahRUwWBR2WlluHduHKDpaZMi3NtA1Qpnuv/oAzfHdDOM2cTg7vWEWxXDAYcgmvjA9KO45MHR6azkGD4KHLwc27DYl5qm3kufLQ7/reCzZKmQtt2Xdw9tvUiJd+qNnbwEf7hyfBIunopM/ufc+Khp+y+Sme3myIcxByVhJq0CfmwK96D66Gy7gnQgTh9zCrthD9g1BrLd9NvYGGz1BbPCpj2Gu1YSsxLnNniGerGMC48ARRtjXOO1IBY98F9yb6GTfqYhbvE/+sPbMq+dZIMoM0XXDmw4yh/36LytPMcxoy3vJKu2OnHClAh5dpxnZx/kQUaRisYkt6vQu+kJErRJmAzAZL6yMtwwyPhD8dRuZJ58zJH2CqhCz4iXoBU1DqJ+DWNYaM6RJ9xq9XJ9w7WqYNt3ZQGpLfgL0PkVD/eMlsVw1fqVeQrLs8l3JAdsTO0sxIm67WUUe6rWfAKQ/fISLn9rjs=
  gem: sorbet-rails
  on:
    repo: chanzuckerberg/sorbet-rails
    branch: setup_travis
