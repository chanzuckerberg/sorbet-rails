language: ruby
env:
- RAILS_VERSION=4.2
- RAILS_VERSION=5.0
- RAILS_VERSION=5.1
- RAILS_VERSION=5.2
- RAILS_VERSION=6.0
rvm:
- 2.3
- 2.4
- 2.5
- 2.6
- ruby-head
matrix:
  exclude:
  - rvm: 2.3
    env: RAILS_VERSION=6.0
  - rvm: 2.4
    env: RAILS_VERSION=6.0
  allow_failures:
  - rvm: ruby-head
before_install:
- gem install bundler -v 2.0.1 --no-doc
- gem install bundler -v 1.17.3 --no-doc
install: "./spec/bin/install.sh"
script:
- "./spec/bin/run_spec.sh"
deploy:
  provider: rubygems
  api_key:
    secure: MtVafCu/8Q7bNxLL0S5mFd87Nr3QkRSF1ibGGf9iX2z4Cf4+NfDLLmB52V3FjQI8Z/zD9h6ELGODlK4ko0Chz+Oou91iGYXLD3P7w/I43iUxP4Yo2a7B0RRnyCX5OCMXEMkOfQOsisfvdhun723kCXG/msX/p8efw+9RqCZ6rNOl9272d9o3TWx3U8m51wC2yT1xVDmEufxnI2Tfntg9I8iQt4OC/wKHZqyOnXmywZm2d6qRmLpLCitYaS6VTxsRR826mckpHcRrzBRQkpQUjmrW4loH2N5yUHw/6lEsHdkVw2d5JNbrpNz+Ymc8MA1zZxXBsnlY3Xn6xl/bA3FHiKX7GKtawsdb4zl+qHN5RS6V+PyGQbcBk9itpywhEzSkoCsj/pj35wglD8X+Q4ka79/Gg5FNLJoxBOf4wmNvxRo6xMja+ojLOu91+ywPrPbWF9C8NkDflxdJUocKZ3E/M32OUXex3VgzaOA/fG2k3nncttUJXHg7futTdkewfuxcXTwq/Id7ptIjojccWuuMtpTh0P/GJdkoowoh9/tglcc2tJExKit3A8iF0plHt+UwkRlxzG/mVmxZD8Rt/B5iK0/K43IbiPBXrnsdn12rIsOTXuF9vo/t6kBpZGa909zXlsGpTxvHewRIgOrkUTzYkCRg4k4PWnTQV2Of2C6uWco=
  gem: sorbet-rails
  on:
    repo: chanzuckerberg/sorbet-rails
    branch: setup_travis
