language: ruby
env:
- RAILS_VERSION=4.2
- RAILS_VERSION=5.0
- RAILS_VERSION=5.1
- RAILS_VERSION=5.2
- RAILS_VERSION=6.0
rvm:
- 2.3
- 2.4
- 2.5
- 2.6
- ruby-head
matrix:
  exclude:
  - rvm: 2.3
    env: RAILS_VERSION=6.0
  - rvm: 2.4
    env: RAILS_VERSION=6.0
  allow_failures:
  - rvm: ruby-head
before_install:
- gem install bundler -v 2.0.1 --no-doc
- gem install bundler -v 1.17.3 --no-doc
install: "./spec/bin/install.sh"
script:
- "./spec/bin/run_spec.sh"
deploy:
  provider: rubygems
  api_key:
    secure: be9j7GAAJNlWDZF/T4T4+G7rNWsh1cHld8Qt6XsnyS9cDzCH4akWqWC4zvZ5Hk/zTKFTWvusYehnkGlzPk9/ymqGCN1q0arpR2u665CRhlnBj1nUMI9ZeYiKLcHrEizcXY3WA7XvnSSlsI61GCL7ysdP/nSI1mQw1Cedekz+Ay9eLaMQQJDKI81VzMGHYbK5aJfGOq3RmDLqMayk6fsRx95b0kZCs59MDgzTy8z/gDbONa56Tv23QfKuSsF35DUhW3cu2QBVCxCCgKz6u+BD/DFhI436hZOBNEiaHNYDIyEM8bd/sUsXNylfUIn2K3Aish3FdVinqJ/FrMq10D78xhn1F69kywGpbYJvj0i/UvJ3FjSQqTIzGmvLki6ypadWe4YvA0oxZlHpt1Cq5473xqWaGLrNG7AY44R70xIqdNBUCa3+rvSNgdDHt7k15Fgo4n4kswpZu/JsINAmRYxbzc6Msei9DflxtG/c1uSJWKisCTz/yMlneDwIDiAtB23bJClKSXg8Ov7U+D4JTnrPRUkx+G6icLVygx8LcPneS9DExgFV7dCz2BejdIVKx3kcQbm/bMt7lhNuIYFfUrvBG9riUngUrHZKwh81oFUrCZFMhAfi6L6EbKAf/sIrruPz4HFfUTJTgNrgtgA9uSNcmC/Gnvgj+lg/Fv9j9448ANs=
  gem: sorbet-rails
  on:
    tags: true
    repo: chanzuckerberg/sorbet-rails
